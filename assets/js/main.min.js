!function(e){"use strict";var o,n=e(window),t=e("body");e("#wrapper");(breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),"undefined"!=typeof browser&&"ie"==browser.name&&t.addClass("ie"),"undefined"!=typeof browser&&browser.mobile&&t.addClass("touch"),"undefined"==typeof browser||browser.canUse("transition"))&&(n.on("load",function(){window.setTimeout(function(){t.removeClass("is-preload")},100)}),n.on("resize",function(){window.clearTimeout(o),t.addClass("is-resizing"),o=window.setTimeout(function(){t.removeClass("is-resizing")},100)}));n.scrollTop(0);var i=e(".panel");i.each(function(){var o=e(this),n=e('[href="#'+o.attr("id")+'"]');e('<div class="closer" />').appendTo(o).on("click",function(e){o.trigger("---hide")}),o.on("click",function(e){e.stopPropagation()}).on("---toggle",function(){o.hasClass("active")?o.triggerHandler("---hide"):o.triggerHandler("---show")}).on("---show",function(){t.hasClass("content-active")&&i.trigger("---hide"),o.addClass("active"),n.addClass("active"),t.addClass("content-active")}).on("---hide",function(){o.removeClass("active"),n.removeClass("active"),t.removeClass("content-active")}),n.removeAttr("href").css("cursor","pointer").on("click",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("---toggle")})}),t.on("click",function(e){t.hasClass("content-active")&&(e.preventDefault(),e.stopPropagation(),i.trigger("---hide"))}),n.on("keyup",function(e){27==e.keyCode&&t.hasClass("content-active")&&(e.preventDefault(),e.stopPropagation(),i.trigger("---hide"))}),e("#header").find("a").each(function(){var o=e(this),n=o.attr("href");n&&"#"!=n.charAt(0)&&o.removeAttr("href").css("cursor","pointer").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.location.href=n})}),e("#footer").find(".copyright").each(function(){var o=e(this),n=o.parent(),t=n.parent().children().last();breakpoints.on("<=medium",function(){o.appendTo(t)}),breakpoints.on(">medium",function(){o.appendTo(n)})});var r=e("#main"),a={};function s(e){var o=e.data("name");return void 0!==o&&null!==o&&""!==o?o+"":(e.attr("src")||"").split("/").pop()}function p(e,o){if(e&&o)try{if(void 0!==a[o])return;if(e.complete)EXIF.getData(e,function(){a[o]=c(this)});else{var n=function(){try{EXIF.getData(e,function(){a[o]=c(this)})}catch(e){console.warn("EXIF parse error for",o,e)}e.removeEventListener("load",n)};e.addEventListener("load",n)}}catch(e){console.warn("ensureExifForImg error",e)}}function c(e){try{var o=r.data("exif")||{},n="";for(var t in o)if(o.hasOwnProperty(t)){var i=o[t],a=EXIF.getTag(e,i.tag);void 0!==a&&(n+='<i class="'+(i.icon||"")+'" aria-hidden="true"></i> '+a+"&nbsp;&nbsp;")}return n}catch(e){return console.warn("getExifDataMarkup error",e),""}}r.children(".thumb").each(function(){var o=e(this).find(".image"),n=o.children("img");if(0!==o.length&&0!==n.length){var t=s(n);p(n[0],t),o.css("background-image","url("+n.attr("src")+")");var i=n.data("position");i&&o.css("background-position",i),n.hide()}}),r.poptrox({baseZIndex:2e4,caption:function(o){var n=o.children("img"),t=s(n.length?n:o.find("img"));if(void 0!==a[t]&&a[t])return"<p>"+a[t]+"</p>";var i=r.find("img").filter(function(){return s(e(this))===t}).first();return i.length&&(p(i[0],t),void 0!==a[t]&&a[t])?"<p>"+a[t]+"</p>":" "},fadeSpeed:300,onPopupClose:function(){t.removeClass("modal-active")},onPopupOpen:function(){t.addClass("modal-active")},overlayOpacity:0,popupCloserText:"",popupHeight:150,popupLoaderText:"",popupSpeed:300,popupWidth:150,selector:".thumb > a.image",usePopupCaption:!0,usePopupCloser:!0,usePopupDefaultStyling:!1,usePopupForceClose:!0,usePopupLoader:!0,usePopupNav:!0,windowMargin:50}),breakpoints.on("<=xsmall",function(){r[0]&&r[0]._poptrox&&(r[0]._poptrox.windowMargin=0)}),breakpoints.on(">xsmall",function(){r[0]&&r[0]._poptrox&&(r[0]._poptrox.windowMargin=50)})}(jQuery);